# SEED v5.3 安定化と自動テスト導入

**日付**: 2026-02-15
**バージョン**: v5.3.1

## 背景
SEED v5.3 の初期展開において、起動エラー（`runBackup` 欠落）、設定のハードコード（相対パス問題）、AI提案ロジックのクラッシュ（スコープバグ）など、複数の致命的な問題が発見された。これらは「動けばいい」という継ぎ接ぎ開発の弊害であった。

## 実施した対策

### 1. アーキテクチャの整理
- **`ops/config.js` の導入**: 環境変数とファイルパスを一元管理。「どこで実行してもパスが合う」状態にした。
- **App/Server 分離**: Express アプリ定義 (`ops/core/app.js`) と 起動ロジック (`ops/server.js`) を分離し、テスト容易性を向上させた。

### 2. 品質の担保（自動テスト）
- **シナリオテスト**: 実際の業務フロー（受付→承認→AI分析）を模倣するスクリプト `ops/tests/scenario_runner.js` を実装。
- **Mock AI**: GPUレス環境でも開発できるよう、`.env` で `LLM_MOCK=true` を設定可能にし、AIの振る舞いを決定論的にシミュレートできるようにした。

### 3. 日本語ドキュメント運用
- 改善指示書、計画書、レポートを日本語で統一し、日本チームでの運用効率を高めた。

## 学び (Lessons Learned)
- **「動く」と「使える」は違う**: `npm start` 一発で動かないキットは、そもそも使われない。初期データ生成やパス解決は P0 でやるべき。
- **テストはドキュメント**: `scenario_runner.js` はテストであると同時に、「このシステムはどうやれば動くのか」を示す最強のドキュメントになった。

---
この知見は SEED v6 以降の開発標準として継承する。
